<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Weather-it ‚ú®</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');

* {
  box-sizing: border-box;
  font-family: 'Poppins', sans-serif;
}

body {
  margin: 0;
  min-height: 100vh;
  overflow: hidden;
  background: linear-gradient(#aee1f9, #fefefe);
}

/* üåå BACKGROUND LAYERS */
.background {
  position: fixed;
  inset: 0;
  z-index: 0;
  pointer-events: none;
}

/* ‚òÄÔ∏è SUNNY */
.sun {
  position: absolute;
  top: 60%;
  left: 50%;
  width: 180px;
  height: 180px;
  background: radial-gradient(circle, #ffd93d, #ffb703);
  border-radius: 50%;
  transform: translate(-50%, -50%);
  animation: rise 3s ease forwards, glow 2s infinite alternate;
}

@keyframes rise {
  from { top: 100%; }
  to { top: 60%; }
}

@keyframes glow {
  from { box-shadow: 0 0 30px #ffd93d; }
  to { box-shadow: 0 0 70px #ffd93d; }
}

/* üåßÔ∏è RAIN */
.rain {
  position: absolute;
  inset: 0;
}

.drop {
  position: absolute;
  width: 2px;
  height: 20px;
  background: rgba(255,255,255,0.6);
  animation: fall 1s linear infinite;
}

@keyframes fall {
  from { transform: translateY(-100px); }
  to { transform: translateY(110vh); }
}

/* ‚ùÑÔ∏è SNOW */
.snowflake {
  position: absolute;
  color: white;
  font-size: 1.2rem;
  animation: snowFall linear infinite;
}

@keyframes snowFall {
  from { transform: translateY(-10%); }
  to { transform: translateY(110vh); }
}

/* üßä UI CARD */
.container {
  position: relative;
  z-index: 2;
  width: 90%;
  max-width: 380px;
  margin: auto;
  margin-top: 10vh;
  background: rgba(255,255,255,0.6);
  backdrop-filter: blur(16px);
  padding: 24px;
  border-radius: 22px;
  text-align: center;
  box-shadow: 0 25px 50px rgba(0,0,0,0.2);
}

h1 {
  margin-bottom: 10px;
}

.search {
  display: flex;
  gap: 8px;
}

input {
  flex: 1;
  padding: 10px;
  border-radius: 12px;
  border: none;
  outline: none;
}

button {
  padding: 10px 14px;
  border-radius: 12px;
  border: none;
  cursor: pointer;
  background: #60a5fa;
  color: white;
}

.weather img {
  width: 80px;
}

.error {
  color: #dc2626;
}
</style>
</head>

<body>

<!-- üåå Dynamic Background -->
<div class="background" id="bg"></div>

<!-- üßä UI -->
<div class="container">
  <h1>üå∏ Weather-it</h1>

  <div class="search">
    <input id="city" placeholder="Enter city (Mumbai)">
    <button onclick="search()">üîç</button>
  </div>

  <div id="output"></div>
</div>

<script>
const API_KEY = "b28d989487c24cf7a0c121414260201";
const bg = document.getElementById("bg");

document.getElementById("city").addEventListener("keypress", e => {
  if (e.key === "Enter") search();
});

function search() {
  const city = document.getElementById("city").value.trim();
  if (!city) return;

  document.getElementById("output").innerHTML = "‚è≥ loading...";
  bg.innerHTML = "";

  fetch(`https://api.weatherapi.com/v1/current.json?key=${API_KEY}&q=${city}`)
    .then(res => res.json())
    .then(data => {
      if (data.error) {
        showError(data.error.message);
        return;
      }
      renderWeather(data);
      setAnimation(data.current.condition.text.toLowerCase());
    })
    .catch(() => showError("Network error"));
}

function renderWeather(data) {
  document.getElementById("output").innerHTML = `
    <div class="weather">
      <h2>${data.location.name}</h2>
      <img src="${data.current.condition.icon}">
      <p>üå° ${data.current.temp_c} ¬∞C</p>
      <p>${data.current.condition.text}</p>
    </div>
  `;
}

function setAnimation(condition) {
  bg.innerHTML = "";

  if (condition.includes("rain")) {
    for (let i = 0; i < 100; i++) {
      const drop = document.createElement("div");
      drop.className = "drop";
      drop.style.left = Math.random() * 100 + "%";
      drop.style.animationDuration = 0.5 + Math.random() + "s";
      bg.appendChild(drop);
    }
  } 
  else if (condition.includes("sun") || condition.includes("clear")) {
    const sun = document.createElement("div");
    sun.className = "sun";
    bg.appendChild(sun);
  } 
  else if (condition.includes("snow")) {
    for (let i = 0; i < 40; i++) {
      const snow = document.createElement("div");
      snow.className = "snowflake";
      snow.innerHTML = "‚ùÑÔ∏è";
      snow.style.left = Math.random() * 100 + "%";
      snow.style.animationDuration = 5 + Math.random() * 5 + "s";
      bg.appendChild(snow);
    }
  }
}

function showError(msg) {
  document.getElementById("output").innerHTML =
    `<p class="error">‚ùå ${msg}</p>`;
}
</script>

</body>
</html>
